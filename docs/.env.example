# ==========================================
# Datos Pro-Vida Dashboard - Environment Variables
# ==========================================
# 
# Copia este archivo a .env y completa los valores
# NUNCA commitees el archivo .env al repositorio
#

# ============ General ============
NODE_ENV=development # development | test | production
APP_NAME="Datos Pro-Vida Dashboard"
APP_VERSION=1.0.0

# ============ Frontend (Next.js) ============
# URL del backend API
NEXT_PUBLIC_API_URL=http://localhost:4000/api/v1

# Entorno público (visible en el cliente)
NEXT_PUBLIC_ENVIRONMENT=development

# Analytics (opcional)
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX
NEXT_PUBLIC_SENTRY_DSN=https://xxxxxxxxxxxxx@sentry.io/xxxxxxx

# ============ Backend (Express) ============
# Puerto del servidor
PORT=4000

# URL base del frontend (para CORS)
FRONTEND_URL=http://localhost:3000

# CORS Origins (separados por coma)
CORS_ORIGIN=http://localhost:3000,http://127.0.0.1:3000

# ============ Base de Datos (PostgreSQL) ============
# URL de conexión completa
DATABASE_URL=postgresql://usuario:password@localhost:5432/provida_db

# URL directa (para migraciones)
DIRECT_URL=postgresql://usuario:password@localhost:5432/provida_db

# Configuración del pool
DB_POOL_MIN=2
DB_POOL_MAX=10

# ============ Autenticación (Fase 2) ============
# Secret para JWT (generar con: openssl rand -base64 32)
JWT_SECRET=tu-secret-super-seguro-cambiar-en-produccion
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Bcrypt salt rounds
BCRYPT_ROUNDS=10

# ============ APIs Externas ============
# World Health Organization (WHO)
WHO_API_BASE_URL=https://api.who.int/data
WHO_API_KEY=tu-api-key-aqui # Si es requerida

# World Bank Open Data
WORLDBANK_API_BASE_URL=https://api.worldbank.org/v2
WORLDBANK_API_KEY= # Generalmente no requiere key

# UN Data
UNDATA_API_BASE_URL=https://data.un.org/api
UNDATA_API_KEY=tu-api-key-aqui

# PubMed
PUBMED_API_BASE_URL=https://eutils.ncbi.nlm.nih.gov/entrez/eutils
PUBMED_API_KEY=tu-api-key-aqui

# Data.gov
DATAGOV_API_BASE_URL=https://api.data.gov
DATAGOV_API_KEY=tu-api-key-aqui

# ============ Rate Limiting ============
# General API
RATE_LIMIT_WINDOW_MS=900000 # 15 minutos
RATE_LIMIT_MAX_REQUESTS=100

# Endpoints de export
EXPORT_RATE_LIMIT_MAX=10

# Login attempts (Fase 2)
LOGIN_RATE_LIMIT_MAX=5

# ============ Logging ============
# Nivel de logging: error | warn | info | http | debug
LOG_LEVEL=debug

# Guardar logs en archivos
LOG_TO_FILE=true
LOG_FILE_PATH=logs/

# ============ Cache ============
# TTL en segundos
CACHE_TTL_SHORT=300 # 5 minutos
CACHE_TTL_MEDIUM=3600 # 1 hora
CACHE_TTL_LONG=86400 # 24 horas

# Redis (opcional, Fase 2)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# ============ Email (Fase 2) ============
# SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=tu-email@gmail.com
SMTP_PASSWORD=tu-password-o-app-password
EMAIL_FROM=noreply@datosprovidadashboard.com
EMAIL_FROM_NAME="Datos Pro-Vida Dashboard"

# ============ File Storage ============
# Local storage path
UPLOAD_PATH=./uploads
MAX_FILE_SIZE=10485760 # 10MB en bytes

# AWS S3 (opcional, Fase 2)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=datos-provida-uploads

# ============ Sentry (Error Tracking) ============
SENTRY_DSN=https://xxxxxxxxxxxxx@sentry.io/xxxxxxx
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1 # 10%

# ============ Monitoring ============
# New Relic (opcional)
NEW_RELIC_LICENSE_KEY=
NEW_RELIC_APP_NAME="Datos Pro-Vida Dashboard - Backend"

# Datadog (opcional)
DD_API_KEY=
DD_APP_KEY=

# ============ Feature Flags ============
# Habilitar/deshabilitar features
FEATURE_AUTH_ENABLED=false
FEATURE_ADMIN_PANEL_ENABLED=false
FEATURE_EXPORT_PDF_ENABLED=true
FEATURE_SOCIAL_SHARE_ENABLED=true
FEATURE_ADVANCED_FILTERS_ENABLED=true

# ============ Testing ============
# Base de datos de test
TEST_DATABASE_URL=postgresql://usuario:password@localhost:5432/provida_test

# Deshabilitar logs en tests
TEST_DISABLE_LOGS=true

# ============ Security ============
# HTTPS only (en producción)
HTTPS_ONLY=false

# Session secret (generar con: openssl rand -base64 32)
SESSION_SECRET=otro-secret-super-seguro-cambiar

# CSRF Protection
CSRF_SECRET=csrf-secret-cambiar-en-produccion

# Cookie settings
COOKIE_SECURE=false # true en producción
COOKIE_SAMESITE=lax # strict | lax | none
COOKIE_MAX_AGE=86400000 # 24 horas

# ============ Backup ============
# Automated backups
BACKUP_ENABLED=false
BACKUP_SCHEDULE="0 2 * * *" # Daily at 2 AM (cron format)
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=./backups

# ============ Third-Party Services ============
# Google Analytics
GA_MEASUREMENT_ID=G-XXXXXXXXXX

# Google Maps (si se usa)
GOOGLE_MAPS_API_KEY=

# Cloudflare (si se usa)
CLOUDFLARE_ZONE_ID=
CLOUDFLARE_API_TOKEN=

# ============ Performance ============
# Compression
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6 # 1-9

# Request timeout (ms)
REQUEST_TIMEOUT=30000 # 30 segundos

# Body parser limits
BODY_LIMIT=100kb
JSON_LIMIT=10mb

# ============ Development ============
# Hot reload
HOT_RELOAD=true

# Debug mode
DEBUG=false
DEBUG_SQL=false # Ver queries SQL en consola

# Seed database on startup
AUTO_SEED=false

# ============ Production Overrides ============
# Estas variables deberían ser diferentes en producción:
# 
# NODE_ENV=production
# HTTPS_ONLY=true
# COOKIE_SECURE=true
# LOG_LEVEL=warn
# FEATURE_AUTH_ENABLED=true
# DEBUG=false
# AUTO_SEED=false
#
# Y por supuesto, usar secrets seguros generados:
# - JWT_SECRET
# - SESSION_SECRET
# - CSRF_SECRET
# - Database passwords
# - API keys reales

# ==========================================
# Notas Importantes:
# ==========================================
#
# 1. NUNCA commitear archivo .env al repositorio
# 2. Usar secrets fuertes en producción (32+ caracteres)
# 3. Rotar secrets regularmente
# 4. Usar diferentes valores para dev/staging/prod
# 5. Documentar cambios en este archivo
# 6. Validar todas las variables con Zod en el código
#
# Para generar secrets seguros:
# openssl rand -base64 32
#
# Para generar UUID:
# uuidgen
#
# ==========================================
