# Gu√≠a de Contribuci√≥n

¬°Gracias por tu inter√©s en contribuir al proyecto Datos Pro-Vida Dashboard! üéâ

Esta gu√≠a te ayudar√° a entender c√≥mo puedes contribuir efectivamente.

---

## üìã Tabla de Contenidos

1. [C√≥digo de Conducta](#c√≥digo-de-conducta)
2. [¬øC√≥mo Puedo Contribuir?](#c√≥mo-puedo-contribuir)
3. [Configuraci√≥n del Entorno](#configuraci√≥n-del-entorno)
4. [Flujo de Trabajo Git](#flujo-de-trabajo-git)
5. [Est√°ndares de C√≥digo](#est√°ndares-de-c√≥digo)
6. [Proceso de Pull Request](#proceso-de-pull-request)
7. [Reportar Bugs](#reportar-bugs)
8. [Sugerir Features](#sugerir-features)
9. [Preguntas Frecuentes](#preguntas-frecuentes)

---

## üìú C√≥digo de Conducta

### Nuestro Compromiso

Este proyecto est√° comprometido con proveer un ambiente acogedor y libre de acoso para todos, independientemente de:

- Edad
- Tama√±o corporal
- Discapacidad
- Etnia
- Identidad y expresi√≥n de g√©nero
- Nivel de experiencia
- Nacionalidad
- Apariencia personal
- Raza
- Religi√≥n
- Identidad y orientaci√≥n sexual

### Comportamiento Esperado

- Usar lenguaje acogedor e inclusivo
- Ser respetuoso de diferentes puntos de vista
- Aceptar cr√≠ticas constructivas con gracia
- Enfocarse en lo mejor para la comunidad
- Mostrar empat√≠a hacia otros miembros

### Comportamiento Inaceptable

- Uso de lenguaje o im√°genes sexualizadas
- Trolling, comentarios insultantes/despectivos
- Acoso p√∫blico o privado
- Publicar informaci√≥n privada de otros
- Conducta no profesional

### Aplicaci√≥n

Instancias de comportamiento abusivo pueden ser reportadas a [email del proyecto]. Todas las quejas ser√°n revisadas e investigadas.

---

## ü§ù ¬øC√≥mo Puedo Contribuir?

### 1. Reportar Bugs

¬øEncontraste un bug? Ay√∫danos creando un issue detallado:

- Usa el template de bug report
- Incluye pasos para reproducir
- Describe el comportamiento esperado vs actual
- Agrega screenshots si es posible
- Especifica tu entorno (OS, navegador, versi√≥n)

### 2. Sugerir Features

¬øTienes una idea para mejorar el proyecto?

- Revisa primero si ya existe un issue similar
- Usa el template de feature request
- Describe claramente el problema que resuelve
- Explica la soluci√≥n propuesta
- Considera alternativas

### 3. Contribuir C√≥digo

- Arreglar bugs reportados
- Implementar features aprobados
- Mejorar documentaci√≥n
- Agregar tests
- Optimizar performance
- Refactorizar c√≥digo

### 4. Mejorar Documentaci√≥n

- Corregir typos
- Aclarar instrucciones confusas
- Agregar ejemplos
- Traducir a otros idiomas
- Actualizar docs desactualizados

### 5. Integrar Nuevas Fuentes de Datos

- Investigar APIs p√∫blicas confiables
- Proponer nuevas fuentes
- Implementar integraciones
- Documentar fuentes agregadas

---

## üíª Configuraci√≥n del Entorno

### Prerrequisitos

```bash
# Versiones requeridas
node --version  # v18.0.0 o superior
npm --version   # v9.0.0 o superior
docker --version # v20.0.0 o superior
git --version   # v2.30.0 o superior
```

### Fork y Clone

```bash
# 1. Hacer fork del repositorio en GitHub
# (Click en el bot√≥n "Fork")

# 2. Clonar tu fork
git clone https://github.com/TU-USUARIO/datos-provida-dashboard.git
cd datos-provida-dashboard

# 3. Agregar upstream remote
git remote add upstream https://github.com/PROYECTO-ORIGINAL/datos-provida-dashboard.git

# 4. Verificar remotes
git remote -v
```

### Instalaci√≥n

```bash
# Instalar dependencias del frontend
cd frontend
npm install

# Instalar dependencias del backend
cd ../backend
npm install

# Levantar servicios con Docker
cd ..
docker-compose up -d

# Ejecutar migraciones
cd backend
npm run migrate:dev

# Ejecutar seeds (opcional)
npm run seed
```

### Verificar Instalaci√≥n

```bash
# Terminal 1 - Backend
cd backend
npm run dev

# Terminal 2 - Frontend  
cd frontend
npm run dev

# Abrir en navegador: http://localhost:3000
```

---

## üîÑ Flujo de Trabajo Git

### Branches

Usamos el modelo Git Flow simplificado:

- **main**: C√≥digo en producci√≥n
- **develop**: Desarrollo activo
- **feature/nombre-feature**: Nuevas funcionalidades
- **fix/nombre-bug**: Correcci√≥n de bugs
- **docs/nombre-doc**: Cambios en documentaci√≥n
- **refactor/nombre**: Refactorizaci√≥n de c√≥digo
- **test/nombre**: Agregar o mejorar tests

### Crear una Branch

```bash
# Asegurarte de estar actualizado
git checkout develop
git pull upstream develop

# Crear nueva branch
git checkout -b feature/nueva-funcionalidad

# O para un fix
git checkout -b fix/corregir-bug
```

### Commits

Seguimos [Conventional Commits](https://www.conventionalcommits.org/):

**Formato:**
```
<tipo>(<scope>): <descripci√≥n corta>

[cuerpo opcional]

[footer opcional]
```

**Tipos:**
- `feat`: Nueva funcionalidad
- `fix`: Correcci√≥n de bug
- `docs`: Cambios en documentaci√≥n
- `style`: Formato, punto y coma faltantes, etc.
- `refactor`: Refactorizaci√≥n de c√≥digo
- `test`: Agregar o modificar tests
- `chore`: Tareas de mantenimiento
- `perf`: Mejoras de performance

**Ejemplos:**

```bash
# Feature
git commit -m "feat(indicators): agregar endpoint de b√∫squeda"

# Fix
git commit -m "fix(dashboard): corregir error en gr√°fico de l√≠neas"

# Docs
git commit -m "docs(readme): actualizar instrucciones de instalaci√≥n"

# Breaking change
git commit -m "feat(api)!: cambiar formato de respuesta de /indicators

BREAKING CHANGE: El campo 'data' ahora retorna un array en lugar de objeto"
```

### Push y Pull Request

```bash
# Push a tu fork
git push origin feature/nueva-funcionalidad

# Ir a GitHub y crear Pull Request desde tu branch hacia develop
```

---

## üìè Est√°ndares de C√≥digo

### TypeScript

```typescript
// ‚úÖ Bien
interface User {
  id: string
  name: string
  email: string
}

const getUser = async (id: string): Promise<User> => {
  // implementaci√≥n
}

// ‚ùå Mal
const getUser = async (id) => {
  // sin types
}
```

### Naming Conventions

```typescript
// Variables y funciones: camelCase
const userName = 'John'
const fetchUserData = () => {}

// Clases e Interfaces: PascalCase
class UserService {}
interface UserProfile {}

// Constantes: UPPER_SNAKE_CASE
const MAX_RETRY_ATTEMPTS = 3
const API_BASE_URL = 'https://api.example.com'

// Archivos: kebab-case
// user-service.ts
// fetch-data-points.ts
```

### Estructura de Archivos

```typescript
// 1. Imports externos
import { useState, useEffect } from 'react'
import axios from 'axios'

// 2. Imports internos
import { Button } from '@/components/ui/Button'
import { formatDate } from '@/utils/date'

// 3. Types e Interfaces
interface Props {
  title: string
}

// 4. Constantes
const DEFAULT_LIMIT = 20

// 5. Componente/Funci√≥n principal
export const MyComponent = ({ title }: Props) => {
  // implementaci√≥n
}

// 6. Helpers (si son peque√±os)
const helperFunction = () => {}
```

### Comentarios

```typescript
// ‚úÖ Buenos comentarios
/**
 * Calcula la tasa de cambio anual entre dos valores
 * @param current - Valor actual
 * @param previous - Valor anterior
 * @returns Porcentaje de cambio
 */
const calculateYearlyChange = (current: number, previous: number): number => {
  return ((current - previous) / previous) * 100
}

// ‚ùå Malos comentarios
// incrementa i
i++

// obtiene usuarios
const getUsers = () => {}
```

### Error Handling

```typescript
// ‚úÖ Bien - Manejo espec√≠fico de errores
try {
  const data = await fetchData()
  return data
} catch (error) {
  if (error instanceof ValidationError) {
    logger.warn('Validation failed', { error })
    throw new BadRequestError(error.message)
  }
  
  if (error instanceof NetworkError) {
    logger.error('Network error', { error })
    throw new ServiceUnavailableError('External API unavailable')
  }
  
  logger.error('Unexpected error', { error })
  throw new InternalServerError('An unexpected error occurred')
}

// ‚ùå Mal - Catch gen√©rico sin manejo
try {
  const data = await fetchData()
} catch (error) {
  console.log(error)
}
```

---

## üìù Proceso de Pull Request

### Checklist Pre-PR

Antes de crear un PR, verifica:

- [ ] El c√≥digo sigue los est√°ndares del proyecto
- [ ] Todos los tests pasan (`npm test`)
- [ ] Linter pasa sin errores (`npm run lint`)
- [ ] Type check pasa (`npm run type-check`)
- [ ] Build funciona (`npm run build`)
- [ ] Commits siguen Conventional Commits
- [ ] Branch est√° actualizada con develop
- [ ] Documentaci√≥n actualizada si es necesario
- [ ] Tests agregados para nueva funcionalidad

### Crear Pull Request

1. **T√≠tulo descriptivo siguiendo Conventional Commits:**
   ```
   feat(dashboard): agregar filtro de fecha en gr√°ficos
   fix(api): corregir error 500 en endpoint de comparaci√≥n
   docs(readme): actualizar instrucciones de deployment
   ```

2. **Descripci√≥n completa usando el template:**

```markdown
## Descripci√≥n
Breve descripci√≥n de los cambios realizados.

## Tipo de cambio
- [ ] Bug fix (cambio que corrige un issue)
- [ ] Nueva feature (cambio que agrega funcionalidad)
- [ ] Breaking change (fix o feature que causa que funcionalidad existente cambie)
- [ ] Documentaci√≥n

## ¬øC√≥mo ha sido probado?
Describe las pruebas realizadas:
- [ ] Tests unitarios
- [ ] Tests de integraci√≥n
- [ ] Tests manuales

## Checklist
- [ ] Mi c√≥digo sigue los est√°ndares del proyecto
- [ ] He revisado mi propio c√≥digo
- [ ] He comentado √°reas complejas
- [ ] He actualizado la documentaci√≥n
- [ ] Mis cambios no generan nuevos warnings
- [ ] He agregado tests que prueban mi fix/feature
- [ ] Todos los tests pasan localmente
- [ ] He actualizado CHANGELOG.md

## Screenshots (si aplica)
Agregar capturas de pantalla de cambios visuales.

## Issues relacionados
Fixes #123
Related to #456
```

### Proceso de Review

1. **Asignaci√≥n autom√°tica**: GitHub asignar√° reviewers autom√°ticamente
2. **Review de c√≥digo**: Al menos 1 aprobaci√≥n requerida
3. **CI/CD checks**: Todos los checks deben pasar
4. **Discusi√≥n**: Responder a comentarios y hacer cambios solicitados
5. **Merge**: Despu√©s de aprobaci√≥n, un maintainer har√° merge

### Responder a Comentarios

```markdown
# ‚úÖ Buena respuesta
Gracias por el feedback. Tienes raz√≥n, refactoric√© esa funci√≥n para mejorar la legibilidad.
Commit: abc123

# ‚ùå Mala respuesta
No, est√° bien as√≠.
```

---

## üêõ Reportar Bugs

### Template de Bug Report

```markdown
**Describe el bug**
Descripci√≥n clara y concisa del bug.

**Para Reproducir**
Pasos para reproducir el comportamiento:
1. Ve a '...'
2. Click en '....'
3. Scroll down a '....'
4. Ver error

**Comportamiento Esperado**
Descripci√≥n clara de lo que esperabas que sucediera.

**Screenshots**
Si aplica, agrega screenshots para explicar el problema.

**Entorno:**
- OS: [e.g. Windows 11, macOS 14]
- Navegador: [e.g. Chrome 118, Firefox 119]
- Versi√≥n del proyecto: [e.g. 1.0.0]
- Node version: [e.g. 18.17.0]

**Contexto Adicional**
Cualquier otra informaci√≥n relevante sobre el problema.

**Logs**
```
Pegar logs relevantes aqu√≠
```
```

### Prioridad de Bugs

Los maintainers etiquetar√°n los bugs seg√∫n prioridad:

- üî¥ **Critical**: Bloquea funcionalidad principal, afecta a todos los usuarios
- üü† **High**: Funcionalidad importante afectada, workaround dif√≠cil
- üü° **Medium**: Funcionalidad afectada, existe workaround razonable
- üü¢ **Low**: Problema menor, no afecta funcionalidad principal

---

## üí° Sugerir Features

### Template de Feature Request

```markdown
**¬øTu feature request est√° relacionado a un problema?**
Descripci√≥n clara del problema. Ej: Siempre me frustra cuando [...]

**Describe la soluci√≥n que te gustar√≠a**
Descripci√≥n clara de lo que quieres que suceda.

**Describe alternativas que has considerado**
Descripci√≥n de soluciones o features alternativas.

**Contexto Adicional**
Cualquier otro contexto, screenshots o ejemplos.

**Mockups/Dise√±os (opcional)**
Si tienes dise√±os o mockups, comp√°rtelos aqu√≠.
```

### Proceso de Aprobaci√≥n de Features

1. **Propuesta**: Crear issue con template de feature request
2. **Discusi√≥n**: La comunidad discute viabilidad y detalles
3. **Aprobaci√≥n**: Maintainers aprueban o rechazan con justificaci√≥n
4. **Asignaci√≥n**: Se etiqueta como "good first issue" si es apropiado
5. **Implementaci√≥n**: Alguien puede tomar la tarea

---

## üß™ Testing

### Ejecutar Tests

```bash
# Todos los tests
npm test

# Tests en modo watch
npm test -- --watch

# Tests con coverage
npm test -- --coverage

# Test espec√≠fico
npm test -- user.service.test.ts
```

### Escribir Tests

```typescript
// ‚úÖ Buen test
describe('IndicatorsService', () => {
  describe('getAll', () => {
    it('should return all indicators when no filter provided', async () => {
      // Arrange
      const mockIndicators = [
        { id: '1', name: 'Indicator 1' },
        { id: '2', name: 'Indicator 2' }
      ]
      jest.spyOn(repository, 'findAll').mockResolvedValue(mockIndicators)
      
      // Act
      const result = await service.getAll()
      
      // Assert
      expect(result).toEqual(mockIndicators)
      expect(repository.findAll).toHaveBeenCalledTimes(1)
    })
    
    it('should throw NotFoundError when no indicators exist', async () => {
      // Arrange
      jest.spyOn(repository, 'findAll').mockResolvedValue([])
      
      // Act & Assert
      await expect(service.getAll()).rejects.toThrow(NotFoundError)
    })
  })
})

// ‚ùå Mal test
it('works', () => {
  const result = doSomething()
  expect(result).toBeTruthy()
})
```

### Coverage M√≠nimo

- **Statements**: 70%
- **Branches**: 65%
- **Functions**: 70%
- **Lines**: 70%

---

## üìö Documentaci√≥n

### Actualizar Docs

Si tu cambio afecta:

- **API**: Actualizar `API_DOCUMENTATION.md`
- **Configuraci√≥n**: Actualizar `README.md`
- **Deployment**: Actualizar `DEPLOYMENT.md`
- **Base de datos**: Actualizar `DATA_MODEL.md`
- **Prompts**: Actualizar `CURSOR_PROMPTS.md`

### JSDoc en Funciones P√∫blicas

```typescript
/**
 * Calcula estad√≠sticas descriptivas de un conjunto de datos
 * @param data - Array de n√∫meros a analizar
 * @param options - Opciones de c√°lculo
 * @param options.includeOutliers - Si incluir outliers en el c√°lculo
 * @returns Objeto con estad√≠sticas calculadas
 * @throws {ValidationError} Si el array est√° vac√≠o
 * @example
 * const stats = calculateStats([1, 2, 3, 4, 5])
 * // { mean: 3, median: 3, mode: null, stdDev: 1.41 }
 */
export function calculateStats(
  data: number[],
  options?: { includeOutliers?: boolean }
): Statistics {
  // implementaci√≥n
}
```

---

## üé® Estilo de C√≥digo

### Linter

Usamos ESLint con configuraci√≥n estricta:

```bash
# Ejecutar linter
npm run lint

# Fix autom√°tico
npm run lint:fix
```

### Prettier

Formateador de c√≥digo configurado:

```bash
# Formatear c√≥digo
npm run format

# Check formato
npm run format:check
```

### Configuraci√≥n de Editor

**VS Code** (`.vscode/settings.json`):
```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "typescript.tsdk": "node_modules/typescript/lib"
}
```

---

## üîç Code Review Guidelines

### Para Reviewers

**DO:**
- ‚úÖ Ser constructivo y educado
- ‚úÖ Explicar el "por qu√©" de tus sugerencias
- ‚úÖ Distinguir entre "debe cambiar" y "sugerencia"
- ‚úÖ Aprobar cuando est√© listo
- ‚úÖ Hacer preguntas si algo no est√° claro

**DON'T:**
- ‚ùå Ser condescendiente
- ‚ùå Nitpicking excesivo
- ‚ùå Bloquear sin raz√≥n v√°lida
- ‚ùå Pedir cambios sin explicaci√≥n

**Ejemplo de buen comentario:**
```
Sugiero extraer esta l√≥gica a una funci√≥n separada para mejorar 
la testabilidad y reutilizaci√≥n. Algo como:

```typescript
const validateUserInput = (input: UserInput): ValidationResult => {
  // l√≥gica aqu√≠
}
```

¬øQu√© opinas?
```

### Para Autores

- Responde a todos los comentarios
- No tomes cr√≠ticas personalmente
- Agradece el tiempo del reviewer
- Haz los cambios solicitados o discute alternativas
- Re-solicita review despu√©s de cambios

---

## üè∑Ô∏è Labels del Proyecto

| Label | Descripci√≥n |
|-------|-------------|
| `bug` | Algo no funciona correctamente |
| `enhancement` | Nueva feature o request |
| `documentation` | Mejoras en documentaci√≥n |
| `good first issue` | Bueno para newcomers |
| `help wanted` | Se necesita ayuda extra |
| `question` | Pregunta o necesita informaci√≥n |
| `wontfix` | No se trabajar√° en esto |
| `duplicate` | Issue o PR duplicado |
| `priority: high` | Alta prioridad |
| `priority: medium` | Prioridad media |
| `priority: low` | Baja prioridad |
| `frontend` | Relacionado al frontend |
| `backend` | Relacionado al backend |
| `database` | Relacionado a la BD |
| `api` | Relacionado a la API |

---

## üéØ Good First Issues

¬øPrimera vez contribuyendo? Busca issues con el label `good first issue`:

**Ejemplos t√≠picos:**
- Corregir typos en documentaci√≥n
- Agregar tests faltantes
- Mejorar mensajes de error
- Agregar validaciones simples
- Actualizar dependencias
- Traducir docs

**C√≥mo empezar:**
1. Comenta en el issue que quieres trabajar en √©l
2. Un maintainer te lo asignar√°
3. Pregunta si tienes dudas
4. Trabaja en tu soluci√≥n
5. Crea el PR

---

## ‚ùì Preguntas Frecuentes

### ¬øCu√°nto tiempo tarda en revisarse un PR?

T√≠picamente 2-5 d√≠as h√°biles. PRs peque√±os se revisan m√°s r√°pido.

### ¬øPuedo trabajar en m√∫ltiples issues a la vez?

S√≠, pero recomendamos enfocarse en uno o dos para no dispersarse.

### Mi PR fue rechazado, ¬øqu√© hago?

Lee los comentarios cuidadosamente, pregunta si algo no est√° claro, y considera hacer los cambios sugeridos.

### ¬øNecesito ser experto para contribuir?

¬°No! Todos empezamos en alg√∫n lugar. Los `good first issues` son perfectos para comenzar.

### ¬øPuedo contribuir sin saber programar?

¬°S√≠! Puedes ayudar con:
- Documentaci√≥n
- Dise√±o
- Reportar bugs
- Sugerir features
- Traducciones
- Pruebas de usuario

### ¬øHay reuniones del proyecto?

Actualmente no hay reuniones regulares, pero se anunciar√°n en los issues si se programan.

### ¬øC√≥mo me convierto en maintainer?

Los maintainers son seleccionados bas√°ndose en:
- Contribuciones consistentes
- Conocimiento del proyecto
- Habilidades de code review
- Participaci√≥n en la comunidad

---

## üìû Contacto

- **Issues de GitHub**: Para bugs y features
- **Discussions**: Para preguntas generales
- **Email**: contacto@datosprovidadashboard.com
- **Twitter**: @DatosProVida (si aplica)

---

## üôè Agradecimientos

Gracias a todos los que han contribuido al proyecto:

<!-- ALL-CONTRIBUTORS-LIST:START -->
<!-- Se actualizar√° autom√°ticamente con all-contributors -->
<!-- ALL-CONTRIBUTORS-LIST:END -->

---

## üìñ Recursos Adicionales

- [Git Flow](https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow)
- [Conventional Commits](https://www.conventionalcommits.org/)
- [Semantic Versioning](https://semver.org/)
- [TypeScript Best Practices](https://www.typescriptlang.org/docs/handbook/declaration-files/do-s-and-don-ts.html)
- [React Best Practices](https://react.dev/learn)
- [Node.js Best Practices](https://github.com/goldbergyoni/nodebestpractices)

---

**¬°Esperamos tus contribuciones! üöÄ**

---

**Versi√≥n:** 1.0.0  
**√öltima actualizaci√≥n:** Octubre 2025